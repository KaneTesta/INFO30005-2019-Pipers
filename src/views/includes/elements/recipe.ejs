<div class="recipe-row">
    <div class="recipe">
        <p class="text-detail text-detail-top">Recipe <%= index %></p>

        <img src="<%= recipe.image %>" class="recipe-image">
        <h2><%= recipe.title %></h2>

        <h6>Info</h6>
        <div class="recipe-info">
            <% if (recipe.totalTime) { %>
            <p>Time: <%= recipe.totalTime %> minutes</p>
            <% }; %>

            <% if (recipe.prepTime) { %>
            <p>Prep time: <%= recipe.prepTime %> minutes</p>
            <% }; %>

            <% if (recipe.cookTime) { %>
            <p>Cook time: <%= recipe.cookTime %> minutes</p>
            <% }; %>

            <% if (recipe.serves) { %>
            <p>Serves: <%= recipe.serves %></p>

            <% if (data.serving_size && data.serving_size != recipe.serves) { %>
            <p class="ingredient-quantity-serving">Adjusted Serving: <%= data.serving_size %></p>
            <% }; %>
            <% }; %>
        </div>

        <% if (recipe.ingredients) { %>
        <h6>Ingredients</h6>
        <div class="recipe-info recipe-ingredients">
            <% for (let i = 0; i < recipe.ingredients.length; ++i) { %>
            
            <% let ingredientText = recipe.ingredients[i].displayText || 
                recipe.ingredients[i].text; %>

            <% if (recipe.matches_priority.find((el) => el === recipe.ingredients[i].ingredient)) { %>
            <p class="ingredient-match-priority"><%- ingredientText %></p>
            <% } else if (recipe.matches.find((el) => el === recipe.ingredients[i].ingredient)) { %>
            <p class="ingredient-match"><%- ingredientText %></p>
            <% } else { %>
            <p><%- ingredientText %></p>
            <% }; %>
            <% }; %>
        </div>
        <% }; %>

        <% if (recipe.description) { %>
        <p class="recipe-description"><%= recipe.description %></p>
        <% }; %>

        <% if (recipe.notes) { %>
        <h6>Notes</h6>
        <p class="recipe-description"><%= recipe.notes %></p>
        <% }; %>

        <div class="flex-fill">
            <a href="#" class="button button-inline button-next button-recipe" data-id="<%= recipe._id %>"
                data-serving="<%= data.serving_size %>" data-step="1">See Recipe</a>
        </div>
    </div>
</div>
